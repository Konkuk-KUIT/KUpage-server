spring:
  profiles:
    active: local
    group:
      local: common,local
      prod: common,prod
    
---

spring:
  config:
    activate:
      on-profile: common

  security:
    oauth2:
      client:
        registration:
          discord:
            client-id: ${DISCORD_CLIENT_ID}
            client-secret: ${DISCORD_CLIENT_SECRET}
            scope:
              - email
              - guilds.join
              - guilds.members.read
              - identify
            redirect-uri: ${DISCORD_REDIRECT_URI}
            authorization-grant-type: authorization_code
            client-authentication-method: client_secret_post
        provider:
          discord:
            authorization-uri: https://discord.com/oauth2/authorize
            token-uri: https://discord.com/api/oauth2/token
            user-info-uri: https://discord.com/api/users/@me
            user-name-attribute: id

  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 160MB

logging:
  level:
    root: INFO

discord:
  guild-id: ${DISCORD_GUILD_ID}
  bot-token: ${DISCORD_BOT_TOKEN}

cloud:
  aws:
    s3:
      bucket-name: ${AWS_S3_BUCKET_NAME}
    cloudfront:
      deploy-url: ${CLOUDFRONT_DEPLOY_URL}
    credentials:
      access-key: ${AWS_ACCESS_KEY_ID}
      secret-key: ${AWS_SECRET_ACCESS_KEY}
    region:
      static: ap-northeast-2
      auto: false
    stack:
      auto: false

secret:
  jwt:
    key: ${JWT_SECRET_KEY}
    access:
      expiration: 3600000
    refresh:
      expiration: 1209600000

springdoc:
  default-consumes-media-type: application/json;charset=UTF-8
  default-produces-media-type: application/json;charset=UTF-8
  swagger-ui:
    enabled: true
    path: /swagger-ui
    disable-swagger-default-url: true
    display-request-duration: true
    operations-sorter: alpha
    tags-sorter: alpha
  enable-spring-security: false

const:
  current-batch: SIXTH
  first-round-result-time: ${FIRST_ROUND_RESULT_TIME}
  second-round-result-time: ${SECOND_ROUND_RESULT_TIME}

---

spring:
  config:
    activate:
      on-profile: local

  datasource:
    driver-class-name: org.h2.Driver
    url: ${LOCAL_DB_URL:jdbc:h2:mem:testdb}
    username: ${LOCAL_DB_USERNAME:sa}
    password: ${LOCAL_DB_PASSWORD:}

  jpa:
    hibernate:
      ddl-auto: create
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true
        default_batch_fetch_size: 100
    show-sql: true

server:
  port: 9000

logging:
  level:
    com.kuit.kupage: DEBUG

---

spring:
  config:
    activate:
      on-profile: prod

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${PROD_DB_URL}
    username: ${PROD_DB_USERNAME}
    password: ${PROD_DB_PASSWORD}
    hikari:
      data-source-properties:
        rewriteBatchedStatements: true

server:
  port: 8080

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: false
        jdbc.batch_size: 50
        order_inserts: true
        order_updates: true